<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üîí Acesso Exclusivo</title>

  <link rel="stylesheet" href="css/global.css">

  <style>
    /* CENTRALIZA√á√ÉO E INPUTS (EXISTENTES) */
    .container-romance form {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .container-romance input {
      padding: 12px;
      margin: 15px 0;
      width: 80%;
      max-width: 300px;
      border: 2px solid #5d167f;
      border-radius: 8px;
      font-size: 1em;
      text-align: center;
    }

    .container-romance button {
      background-color: #7b1fa2;
      color: white;
      padding: 12px 30px;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .container-romance button:hover {
      background-color: #5d167f;
    }

    .mensagem-erro {
      color: #ff4081;
      margin-top: 10px;
      font-weight: bold;
      display: none;
    }

    /* index.html (ADICIONAR NO BLOCO <style>) */

    .pista-senha {
      font-size: 0.95em;
      color: #5d167f;
      /* Roxo escuro para harmonizar */
      font-style: italic;
      /* Texto em it√°lico para suavizar */
      margin-top: -10px;
      /* Reduz o espa√ßo com o campo de senha */
      margin-bottom: 25px;
      /* Espa√ßo antes do bot√£o */
      text-align: center;
    }
  </style>
</head>

<body>

  <div class="container-romance">

    <h1>üîí Acesso Necess√°rio</h1>
    <p>Este portal foi criado com carinho e √© exclusivo para n√≥s.</p>

    <form id="form-login">
      <input type="password" id="senha" placeholder="Insere a nossa senha secreta" required>
      <p class="pista-senha">
        A senha √©: como eu lhe chamava
      </p>
      <button type="submit">Entrar</button>
      <p id="erro" class="mensagem-erro">Senha incorreta. Tenta novamente.</p>
    </form>

  </div>

  <script>
    // -----------------------------------------------------
    // üö® PASSO CRUCIAL: A SENHA SECRETA üö®
    const SENHA_CORRETA = "crian√ßa";
    // -----------------------------------------------------

    const form = document.getElementById('form-login');
    const campoSenha = document.getElementById('senha');
    const mensagemErro = document.getElementById('erro');

    // Caminho para o Sum√°rio
    const PAGINA_CONTEUDO = "sumario.html";

    // 1. FUN√á√ÉO PARA PROCESSAR O LOGIN
    form.addEventListener('submit', function (event) {
      event.preventDefault();

      if (campoSenha.value === SENHA_CORRETA) {
        // Senha correta: Concede o acesso e redireciona
        const horaExpiracao = new Date().getTime() + (60 * 60 * 1000);
        localStorage.setItem('acessoConcedido', 'true');
        localStorage.setItem('expiracao', horaExpiracao.toString());

        window.location.href = PAGINA_CONTEUDO;
      } else {
        // Senha incorreta
        mensagemErro.style.display = 'block';
        campoSenha.value = '';
      }
    });

    // 2. FUN√á√ÉO PARA VERIFICAR SE O ACESSO J√Å FOI CONCEDIDO (EXECUTA IMEDIATAMENTE)
    function verificarAcesso() {
      const acesso = localStorage.getItem('acessoConcedido');
      const expiracao = localStorage.getItem('expiracao');
      const horaAtual = new Date().getTime();

      // Verifica se o token √© v√°lido
      if (acesso === 'true' && expiracao && horaAtual < parseInt(expiracao)) {
        window.location.href = PAGINA_CONTEUDO;
      } else {
        // Token inv√°lido/expirado: Limpa e mant√©m a tela de login vis√≠vel
        localStorage.removeItem('acessoConcedido');
        localStorage.removeItem('expiracao');
      }
    }

    verificarAcesso();

  </script>
</body>

</html>