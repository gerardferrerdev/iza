<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ”’ Acesso Exclusivo</title>

    <link rel="stylesheet" href="css/global.css">

    <style>
        /* CENTRALIZAÃ‡ÃƒO E INPUTS (EXISTENTES) */
        .container-romance form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container-romance input {
            padding: 12px;
            margin: 15px 0;
            width: 80%;
            max-width: 300px;
            border: 2px solid #5d167f;
            border-radius: 8px;
            font-size: 1em;
            text-align: center;
        }

        .container-romance button {
            background-color: #7b1fa2;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .container-romance button:hover {
            background-color: #5d167f;
        }

        .mensagem-erro {
            color: #ff4081;
            margin-top: 10px;
            font-weight: bold;
            display: none;
        }

        .pista-senha {
            font-size: 0.95em;
            color: #5d167f;
            font-style: italic;
            margin-top: -10px;
            margin-bottom: 25px;
            text-align: center;
        }
    </style>
</head>

<body>

    <div class="container-romance">

        <h1>ðŸ”’ Acesso NecessÃ¡rio</h1>
        <p>Este portal foi criado com carinho e Ã© exclusivo para nÃ³s.</p>

        <form id="form-login">
            <input type="password" id="senha" placeholder="Insere a nossa senha secreta" required>
            <p class="pista-senha">
                A senha Ã©: como eu lhe chamava
            </p>
            <button type="submit">Entrar</button>
            <p id="erro" class="mensagem-erro">Senha incorreta. Tenta novamente.</p>
        </form>

    </div>

    <script>
        // FunÃ§Ã£o para verificar o token antes de qualquer outra coisa
        function verificarAcesso() {
            const acesso = localStorage.getItem('acessoConcedido');
            const expiracao = localStorage.getItem('expiracao');
            const horaAtual = new Date().getTime();
            const PAGINA_CONTEUDO = "sumario.html"; 

            // Verifica se o token Ã© vÃ¡lido
            if (acesso === 'true' && expiracao && horaAtual < parseInt(expiracao)) {
                window.location.href = PAGINA_CONTEUDO;
            } else {
                // Token invÃ¡lido/expirado: Limpa
                localStorage.removeItem('acessoConcedido');
                localStorage.removeItem('expiracao');
            }
        }
        verificarAcesso();
    </script>
    
    <script>
        // -----------------------------------------------------
        // ðŸš¨ PASSO CRUCIAL: A SENHA SECRETA ðŸš¨
        const SENHA_CORRETA = "crianÃ§a"; 
        // -----------------------------------------------------

        const form = document.getElementById('form-login');
        const campoSenha = document.getElementById('senha');
        const mensagemErro = document.getElementById('erro');
        const PAGINA_CONTEUDO = "sumario.html"; 

        // FUNÃ‡ÃƒO PARA PROCESSAR O LOGIN
        form.addEventListener('submit', function (event) {
            event.preventDefault();

            if (campoSenha.value === SENHA_CORRETA) {
                // Senha correta: Concede o acesso e redireciona
                const horaExpiracao = new Date().getTime() + (60 * 60 * 1000);
                localStorage.setItem('acessoConcedido', 'true');
                localStorage.setItem('expiracao', horaExpiracao.toString());

                window.location.href = PAGINA_CONTEUDO;
            } else {
                // Senha incorreta
                mensagemErro.style.display = 'block';
                campoSenha.value = '';
            }
        });
    </script>
</body>

</html>