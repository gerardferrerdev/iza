<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poesias: Palavras do Cora√ß√£o</title>

    <link rel="shortcut icon" href="img/velaris-removebg-preview.png" type="image/x-icon">

    <link rel="stylesheet" href="css/global.css">

    <link rel="stylesheet" href="css/style_citacoes.css">
</head>

<body>

     <div id="contador-tempo">
        <span>O Nosso Tempo Juntos Desde sua Volta</span>
        <span id="tempo-decorrido">A calcular...</span>
    </div>

    <div id="contador-vida">
        <span>Desde o Nosso Primeiro Encontro <br></span>
        <span id="tempo-vida-decorrido">A calcular...</span>
    </div>

    <div class="main-content-wrapper">

        <script>
            // --- DADOS DE IN√çCIO (CORRETOS) ---
            const DATA_INICIO_PROJETO = new Date(2025, 9, 17, 22, 0, 0);
            const DATA_PRIMEIRO_ENCONTRO = new Date(2021, 7, 14, 9, 10, 0);

            // --- ELEMENTOS HTML (CORRETOS) ---
            const elementoTempoProjeto = document.getElementById('tempo-decorrido');
            const elementoTempoEncontro = document.getElementById('tempo-vida-decorrido'); // Renomeado para clareza

            function formatarTempo(diferencaMs) {
                // Fun√ß√µes de formata√ß√£o: Recebe milissegundos e devolve a string formatada
                const segundos = Math.floor(diferencaMs / 1000);
                const minutos = Math.floor(segundos / 60);
                const horas = Math.floor(minutos / 60);
                const dias = Math.floor(horas / 24);

                const anos = Math.floor(dias / 365.25);
                const meses = Math.floor(dias / 30.44);

                return `${anos} anos, ` +
                    `${meses % 12} meses, ` +
                    `${dias % 30} dias, ` +
                    `${horas % 24}h, ` +
                    `${minutos % 60}m, ` +
                    `${segundos % 60}s`;
            }

            // FUN√á√ÉO PRINCIPAL QUE ATUALIZA AMBOS OS CONTADORES
            function atualizarContadores() {
                const agora = new Date();

                // 1. C√ÅLCULO E ATRIBUI√á√ÉO DO TEMPO DO PROJETO (J√Å EXISTENTE)
                const diferencaProjetoMs = agora.getTime() - DATA_INICIO_PROJETO.getTime();
                const tempoProjetoFormatado = formatarTempo(diferencaProjetoMs);
                elementoTempoProjeto.textContent = tempoProjetoFormatado;

                // 2. üö® NOVO C√ÅLCULO E ATRIBUI√á√ÉO: TEMPO DO ENCONTRO üö®
                const diferencaEncontroMs = agora.getTime() - DATA_PRIMEIRO_ENCONTRO.getTime();
                const tempoEncontroFormatado = formatarTempo(diferencaEncontroMs);
                elementoTempoEncontro.textContent = tempoEncontroFormatado; // Atribui ao elemento correto!
            }

            // Inicializa e atualiza a cada segundo
            atualizarContadores();
            setInterval(atualizarContadores, 1000);

            // --- C√ìDIGO DO BOT√ÉO TRANCAR (Permanece para o Logout) ---
            document.addEventListener('DOMContentLoaded', function () {
                const botaoTrancar = document.getElementById('trancar-segredos');

                if (botaoTrancar) {
                    botaoTrancar.addEventListener('click', function (event) {
                        event.preventDefault();
                        localStorage.clear();
                        window.location.href = "index.html";
                    });
                }
            });
        </script>

        <div class="main-content-wrapper">

            <div class="container-romance">

                <header>
                    <h1>‚ú® Palavras do Nosso Amor</h1>
                    <p class="subtitulo-poesias">Cita√ß√µes e poemas que nos fazem sorrir e recordar o nosso sentimento.
                    </p>
                </header>

                <section class="lista-citacoes">

                    <div class="cartao-citacao" onclick="revelarCitacao(this)">
                        <div class="header-citacao">
                            <h2>O Amor √© Mestre</h2>
                            <span class="coracao">‚ù§Ô∏è</span>
                        </div>

                        <p class="texto-citacao escondido">
                            "O amor √© mestre, mas √© preciso saber adquir√≠-lo, porque se adquire dificilmente, ao pre√ßo
                            de um esfor√ßo prolongado; √© preciso amar, de fato, n√£o por um instante, mas at√© o fim." -
                            Adaptado de "Os Irm√£os Karamazov"
                            <br><br>

                        </p>
                    </div>

                    <div class="cartao-citacao" onclick="revelarCitacao(this)">
                        <div class="header-citacao">
                            <h2>Tu √âs Uma Mulher Rara</h2>
                            <span class="coracao">‚ù§Ô∏è</span>
                        </div>

                        <p class="texto-citacao escondido">
                            "Tu √©s uma mulher rara, e, al√©m do mais, a melhor de todas as mulheres. Tu pr√≥pria n√£o
                            sonhas as qualidades que tens. Para mim √©s um encanto, n√£o tens igual, e qualquer homem de
                            sentimentos e bom gosto to dir√°, se atentar em ti." ‚Äî Excerto de Carta a Anna Dostoi√©vskaia
                        </p>
                    </div>

                    <div class="cartao-citacao" onclick="revelarCitacao(this)">
                        <div class="header-citacao">
                            <h2>Enjoo</h2>
                            <span class="coracao">‚ù§Ô∏è</span>
                        </div>

                        <p class="texto-citacao escondido">
                            "Repito minhas roupas. <br>
                            Pe√ßo sempre o mesmo sabor. <br>
                            Reassisto filmes. <br>
                            Ou√ßo sempre as mesmas musicas. <br>
                            Afinal a gente nuca enjoa do que realmente gosta. "
                        </p>
                    </div>

                </section>

                <br>
                <a href="sumario.html" class="botao-navegacao">
                    ‚Üê Voltar ao Sum√°rio
                </a>

            </div>
        </div>

        <script>
            // FUN√á√ÉO PARA REVELAR O CONTE√öDO DA POESIA
            function revelarCitacao(cartao) {
                // 1. Encontra o texto escondido dentro deste cart√£o
                const texto = cartao.querySelector('.texto-citacao');

                // 2. Alterna a classe 'escondido' e 'revelado'
                // O 'toggle' remove a classe se ela estiver presente, e adiciona se n√£o estiver.
                texto.classList.toggle('escondido');
                texto.classList.toggle('revelado');

                // 3. Alterna a classe 'cartao-revelado' no pr√≥prio cart√£o para mudar a cor do cora√ß√£o
                cartao.classList.toggle('cartao-revelado');
            }
        </script>

        <script>
            // Fun√ß√£o de verifica√ß√£o de seguran√ßa
            function verificarSessao() {
                const acesso = localStorage.getItem('acessoConcedido');
                const expiracao = localStorage.getItem('expiracao');
                const horaAtual = new Date().getTime();

                // 1. Verifica se o token existe OU se expirou
                if (acesso !== 'true' || !expiracao || horaAtual >= parseInt(expiracao)) {
                    // Se o token √© inv√°lido ou n√£o existe, redireciona para a tela de login
                    window.location.replace("index.html");
                }
            }

            // Executa a verifica√ß√£o assim que a p√°gina √© carregada
            verificarSessao();
        </script>
</body>

</html>