<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Nosso Portal do Amor</title>
    <link rel="shortcut icon" href="img/velaris-removebg-preview.png" type="image/x-icon">

    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/style_capitulo2.css">
</head>

<body>

    <a href="#" id="trancar-segredos" class="botao-navegacao">
        üîí Trancar Segredos
    </a>

   <div id="contador-tempo">
        <span>O Nosso Tempo Juntos Desde sua Volta</span>
        <span id="tempo-decorrido">A calcular...</span>
    </div>

    <div id="contador-vida">
        <span id="tempo-titulo-encontro">Desde o Nosso Primeiro Encontro</span>
        <span id="tempo-vida-decorrido">A calcular...</span>
    </div>
        <script>
    // --- DADOS DE IN√çCIO (CORRETOS) ---
    const DATA_INICIO_PROJETO = new Date(2025, 9, 17, 22, 0, 0);
    const DATA_PRIMEIRO_ENCONTRO = new Date(2021, 7, 14, 9, 10, 0);

    // --- ELEMENTOS HTML (CORRETOS) ---
    const elementoTempoProjeto = document.getElementById('tempo-decorrido');
    const elementoTempoEncontro = document.getElementById('tempo-vida-decorrido');

    function formatarTempo(diferencaMs) {
        // Fun√ß√µes de formata√ß√£o: Recebe milissegundos e devolve a string formatada
        const segundos = Math.floor(diferencaMs / 1000);
        const minutos = Math.floor(segundos / 60);
        const horas = Math.floor(minutos / 60);
        const dias = Math.floor(horas / 24);

        const anos = Math.floor(dias / 365.25);
        const meses = Math.floor(dias / 30.44);

        return `${anos} anos, ` +
            `${meses % 12} meses, ` +
            `${dias % 30} dias, ` +
            `${horas % 24}h, ` +
            `${minutos % 60}m, ` +
            `${segundos % 60}s`;
    }

    // FUN√á√ÉO PRINCIPAL QUE ATUALIZA AMBOS OS CONTADORES
    function atualizarContadores() {
        const agora = new Date();

        // 1. C√ÅLCULO E ATRIBUI√á√ÉO DO TEMPO DO PROJETO
        const diferencaProjetoMs = agora.getTime() - DATA_INICIO_PROJETO.getTime();
        const tempoProjetoFormatado = formatarTempo(diferencaProjetoMs);
        elementoTempoProjeto.textContent = tempoProjetoFormatado;

        // 2. C√ÅLCULO E ATRIBUI√á√ÉO: TEMPO DO ENCONTRO
        const diferencaEncontroMs = agora.getTime() - DATA_PRIMEIRO_ENCONTRO.getTime();
        const tempoEncontroFormatado = formatarTempo(diferencaEncontroMs);
        elementoTempoEncontro.textContent = tempoEncontroFormatado;
    }

    // Inicializa e atualiza a cada segundo
    atualizarContadores();
    setInterval(atualizarContadores, 1000);

    // --- C√ìDIGO DO BOT√ÉO TRANCAR (Continua aqui) ---
    document.addEventListener('DOMContentLoaded', function () {
        const botaoTrancar = document.getElementById('trancar-segredos');

        if (botaoTrancar) {
            botaoTrancar.addEventListener('click', function (event) {
                event.preventDefault();
                localStorage.clear();
                window.location.href = "index.html";
            });
        }
    });
</script>


    <div class="main-content-wrapper">

        <div class="container-romance">

            <h1>O Nosso Portal do Amor</h1>

            <p>Bem-vinda ao nosso cantinho de mem√≥rias! Podes escolher o que queres explorar:</p>

            <div class="menu-sumario">

                <a href="boas_vindas.html" class="cartao-sumario">
                    ‚ù§Ô∏è Primeira homenagem digital
                </a>

                <a href="livro.html" class="cartao-sumario">
                    üìö O Livro que Estamos a Escrever
                </a>

                <a href="fotos.html" class="cartao-sumario">
                    üì∏ A Nossa Galeria de Fotos
                </a>

                <a href="musicas.html" class="cartao-sumario">
                    üé∂ As Nossas M√∫sicas Favoritas
                </a>

                <a href="citacoes.html" class="cartao-sumario">
                    ‚ú® As Nossas Poesias e Cita√ß√µes
                </a>

                <a href="cartas.html" class="cartao-sumario">
                    üíå Os Meus Desabafos e Cartas
                </a>

            </div>

        </div>

    </div>
    
    <script>
        // Fun√ß√£o de verifica√ß√£o de seguran√ßa
        function verificarSessao() {
            const acesso = localStorage.getItem('acessoConcedido');
            const expiracao = localStorage.getItem('expiracao');
            const horaAtual = new Date().getTime();

            // 1. Verifica se o token existe OU se expirou
            if (acesso !== 'true' || !expiracao || horaAtual >= parseInt(expiracao)) {
                // Se o token √© inv√°lido ou n√£o existe, redireciona para a tela de login
                window.location.replace("index.html");
            }
        }

        // Executa a verifica√ß√£o assim que a p√°gina √© carregada
        verificarSessao();
    </script>
</body>

</html>