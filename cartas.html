<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cartas: Os Meus Desabafos</title>

  <link rel="stylesheet" href="css/global.css">
  <link rel="stylesheet" href="css/style_livro.css">
  <link rel="stylesheet" href="css/style_cartas.css">

</head>
<div id="contador-tempo">
  <span>O Nosso Tempo Juntos Desde sua Volta</span>
  <span id="tempo-decorrido">A calcular...</span>
</div>

<div id="contador-vida">
  <span>Desde o Nosso Primeiro Encontro <br></span>
  <span id="tempo-vida-decorrido">A calcular...</span>
</div>

<div class="main-content-wrapper">

  <script>
    // --- DADOS DE IN√çCIO (CORRETOS) ---
    const DATA_INICIO_PROJETO = new Date(2025, 9, 17, 22, 0, 0);
    const DATA_PRIMEIRO_ENCONTRO = new Date(2021, 7, 14, 9, 10, 0);

    // --- ELEMENTOS HTML (CORRETOS) ---
    const elementoTempoProjeto = document.getElementById('tempo-decorrido');
    const elementoTempoEncontro = document.getElementById('tempo-vida-decorrido'); // Renomeado para clareza

    function formatarTempo(diferencaMs) {
      // Fun√ß√µes de formata√ß√£o: Recebe milissegundos e devolve a string formatada
      const segundos = Math.floor(diferencaMs / 1000);
      const minutos = Math.floor(segundos / 60);
      const horas = Math.floor(minutos / 60);
      const dias = Math.floor(horas / 24);

      const anos = Math.floor(dias / 365.25);
      const meses = Math.floor(dias / 30.44);

      return `${anos} anos, ` +
        `${meses % 12} meses, ` +
        `${dias % 30} dias, ` +
        `${horas % 24}h, ` +
        `${minutos % 60}m, ` +
        `${segundos % 60}s`;
    }

    // FUN√á√ÉO PRINCIPAL QUE ATUALIZA AMBOS OS CONTADORES
    function atualizarContadores() {
      const agora = new Date();

      // 1. C√ÅLCULO E ATRIBUI√á√ÉO DO TEMPO DO PROJETO (J√Å EXISTENTE)
      const diferencaProjetoMs = agora.getTime() - DATA_INICIO_PROJETO.getTime();
      const tempoProjetoFormatado = formatarTempo(diferencaProjetoMs);
      elementoTempoProjeto.textContent = tempoProjetoFormatado;

      // 2. üö® NOVO C√ÅLCULO E ATRIBUI√á√ÉO: TEMPO DO ENCONTRO üö®
      const diferencaEncontroMs = agora.getTime() - DATA_PRIMEIRO_ENCONTRO.getTime();
      const tempoEncontroFormatado = formatarTempo(diferencaEncontroMs);
      elementoTempoEncontro.textContent = tempoEncontroFormatado; // Atribui ao elemento correto!
    }

    // Inicializa e atualiza a cada segundo
    atualizarContadores();
    setInterval(atualizarContadores, 1000);

    // --- C√ìDIGO DO BOT√ÉO TRANCAR (Permanece para o Logout) ---
    document.addEventListener('DOMContentLoaded', function () {
      const botaoTrancar = document.getElementById('trancar-segredos');

      if (botaoTrancar) {
        botaoTrancar.addEventListener('click', function (event) {
          event.preventDefault();
          localStorage.clear();
          window.location.href = "index.html";
        });
      }
    });
  </script>

  <div class="main-content-wrapper">

    <div class="container-romance">

      <header>
        <h1>üíå Cartas e Desabafos do Cora√ß√£o</h1>
        <p class="subtitulo-livro">Tudo que eu ja escrevi para voc√™ ou pensei, ou so oque est√° borbulhando na minha
          mente, so pra voc√™</p>
      </header>


      <section class="sumario-capitulos">
        <h3>√çndice R√°pido de Cartas</h3>
        <ul class="lista-capitulos">
          <li><a href="#carta-1">Carta 1: 09/10/2025 18h18</a></li>
          <li><a href="#carta-2">Carta 2: 09/10/2025 19h40</a></li>
          <li><a href="#carta-3">Carta 3: 09/10/2025 23h20</a></li>
          <li><a href="#carta-4">Carta 4: 09/10/2025 23h25</a></li>
          <li><a href="#carta-5">Carta 5: 09/10/2025 23h43</a></li>
          <li><a href="#sumario">Sumario</a></li>





        </ul>
        <hr>
        <section class="conteudo-livro">

          <div class="cartao-carta-revelavel" id="carta-1" onclick="revelarConteudo(this)">

            <div class="header-carta">
              <h2>Carta 1: 09/10/2025 18h18</h2>
              <span class="icone-revelar">‚ñº</span>
            </div>

            <div class="texto-carta-escondido">

              <p>
                Hoje n√£o esta fazendo nem 24h ainda que voc√™ se afastou um pouco, e bom ta feio kkk, to com saudades
                genuinas de voc√™, acordar sem poder dar bom dia, ver reels e n√£o poder mandar, so estar contigo, enfim,
                to
                sentindo su falta, volta pra mim...</p>
            </div>

          </div>

          <div class="cartao-carta-revelavel" id="carta-2" onclick="revelarConteudo(this)">

            <div class="header-carta">
              <h2>Carta 2: 09/10/2025 19h40</h2>
              <span class="icone-revelar">‚ñº</span>
            </div>

            <div class="texto-carta-escondido">
              <p>
                Eu te amo! <br>
                Mas e se eu te machucar? <br>
                Eu te amo! <br>
                Mas eu sou uma grande confus√£o e... <br>
                Eu te amo! <br>
                Mas eu tenho medo... <br>
                Eu te amo! <br>
                Mas e se algum dia agente... <br>
                Eu te amo! <br>
                Voc√™ ao menos esta escutando oque eu to falando? <br>
                Eu te amo! <br>
              </p>
            </div>

          </div>


          <div class="cartao-carta-revelavel" id="carta-3" onclick="revelarConteudo(this)">

            <div class="header-carta">
              <h2>Carta 3: 09/10/2025 23h20</h2>
              <span class="icone-revelar">‚ñº</span>
            </div>

            <div class="texto-carta-escondido">
              <p>
                Hoje eu vou dormir sentindo saudades de voc√™ denovo, nem lembrava mais como era, por incrivel que
                pare√ßa.
              </p>
            </div>

          </div>

          <div class="cartao-carta-revelavel" id="carta-4" onclick="revelarConteudo(this)">

            <div class="header-carta">
              <h2>Carta 4: 09/10/2025 23h25</h2>
              <span class="icone-revelar">‚ñº</span>
            </div>

            <div class="texto-carta-escondido">
              <p>
                Enquanto houver o amanh√£, estarei contigo; e, enquanto estiver contigo sempre desejarei que haja o
                amanh√£.
              </p>
            </div>

          </div>

          <div class="cartao-carta-revelavel" id="carta-5" onclick="revelarConteudo(this)">

            <div class="header-carta">
              <h2>Carta 5: 09/10/2025 23h43</h2>
              <span class="icone-revelar">‚ñº</span>
            </div>

            <div class="texto-carta-escondido">
              <p>
                Bom, j√° que estou sem voc√™ por agora, tive um dia bem estranho... N√£o estranho n√£o. S√≥ um dia normal,
                sabe quando te perguntam: "Como foi seu dia?" e voc√™ solta s√≥ um "normal", genu√≠no mesmo? Pois √©, foi o
                meu hoje. Normal.

                Conclu√≠ minhas mat√©rias da Faculdade, agora √© s√≥ revisar at√© o dia 13.

                E tamb√©m hoje me perguntaram o que √© o amor. Que legal, n√©? Foi um amigo, ele se diz apaixonado e tal.
                Essa pergunta dele me pegou desprevenido, sabe? Porque s√≥ me veio voc√™ √† mente. Correlacionando o amor,
                voc√™ √© o meu amor, a minha defini√ß√£o, aparentemente.

                Foi o que disse para ele: "Irm√£o, amor √© voc√™, independentemente de tudo, ainda ver que vale a pena. √â
                ver que nem tudo s√£o rosas e, mesmo assim, ainda estar extremamente cativado. Amar √© isso: querer o bem
                mesmo de longe."

                Ele riu e mandou um: "T√° bem, mano?" Eu ri e disse que sim, n√©.

                Mas no fundo estou com saudades: muitas, muitas mesmo. N√£o tipo: "Meu Deus, voc√™ se distanciou um pouco
                ontem e estou morrendo de saudades!" Em parte, sim, √© isso. Mas eu sinto sua falta: j√° vai fazer um ano.
                Um ano que pude te dar um abra√ßo, te ter nele. Um ano que voc√™ me deu um beijo, um ano que tento lembrar
                daquela sensa√ß√£o... Sei l√°.

                Amo voc√™. Falo isso sem medo, sabe? Desculpa, sei l√°. Beijos. Boa noite, minha princesa. Queria poder
                estar olhando no fundo desses seus olhos que sou profundamente apaixonado...
              </p>
            </div>

          </div>

        </section>

        <br>
        <a href="sumario.html" id="sumario" class="botao-navegacao">
          ‚Üê Voltar ao Sum√°rio
        </a>
    </div>
  </div>

  <script>
    // Fun√ß√£o de verifica√ß√£o de seguran√ßa
    function verificarSessao() {
        const acesso = localStorage.getItem('acessoConcedido');
        const expiracao = localStorage.getItem('expiracao');
        const horaAtual = new Date().getTime();

        // 1. Verifica se o token existe OU se expirou
        if (acesso !== 'true' || !expiracao || horaAtual >= parseInt(expiracao)) {
            // Se o token √© inv√°lido ou n√£o existe, redireciona para a tela de login
            window.location.replace("index.html");
        }
    }

    // Executa a verifica√ß√£o assim que a p√°gina √© carregada
    verificarSessao();
  </script>

  <script>
    function revelarConteudo(cartao) {
      // Encontra o contentor do texto e o pr√≥prio cart√£o
      const texto = cartao.querySelector('.texto-carta-escondido');

      // Alterna a classe de visibilidade do texto
      texto.classList.toggle('texto-visivel');

      // Alterna a classe no cart√£o para mudar a cor/girar o √≠cone
      cartao.classList.toggle('cartao-revelado');
    }
  </script>
  </body>

</html>